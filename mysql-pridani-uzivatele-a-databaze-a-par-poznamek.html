<!DOCTYPE html>
<html lang="en">
    <head>
        <title>MySQL: přidání uživatele a databáze (a pár poznámek) @ stderr</title>

        <meta charset="UTF-8">

		<link rel="shortcut icon" href="favicon.ico" />

        <link href="https://stderr.cz/theme/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://stderr.cz/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="https://stderr.cz/theme/css/pygment.css" rel="stylesheet">
        <link href="https://stderr.cz/theme/css/mystyle.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,700,300&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <meta name="twitter:card" value="summary" />
    <meta name="twitter:creator" content="@kubiis" />
    <meta name="twitter:title" content="MySQL: přidání uživatele a databáze (a pár poznámek)" />
    <meta name="twitter:description" content="Další článek z velmi nepravidelné série "Základy administrátora" se zaměřuje na tu úplně nejprvotnější práci s MySQL - vytvoření databáze a uživatele. Samozřejmě z řádky, pokud máš phpMyAdmin, ..." />

        <link rel="alternate" type="application/atom+xml" href="https://stderr.cz/feed.atom.xml" title="stderr ATOM/RSS Feed" />
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-44139591-1', 'auto');
            ga('send', 'pageview');
        </script>
    </head>

    <body>
    <div class="container">
        <div class="row">
            <div class="span8 offset3">
                <ul class="breadcrumb menu">
                    <li><a href="https://stderr.cz/o-autorovi">O autorovi</a></li>
                    <li><a href="https://stderr.cz/archives">Archiv</a></li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="span3 text-right">
                <div class="hero-unit">
                    <h1><a href="https://stderr.cz">stderr</a></h1>
                    <p>2>&1</p>
                </div>
                <div class="metadata">
                    <ul class="social">
                            <li><a href="https://twitter.com/kubiis" target="_blank"><img src="https://stderr.cz/theme/social/twitter-32.png" title="Twitter" class="si-twitter" /></a></li>
                            <li><a href="https://github.com/jakubjedelsky" target="_blank"><img src="https://stderr.cz/theme/social/github-32.png" title="Github" class="si-github" /></a></li>
                            <li><a href="https://www.linkedin.com/in/jedelsky" target="_blank"><img src="https://stderr.cz/theme/social/linkedin-32.png" title="Linkedin" class="si-linkedin" /></a></li>
                            <li><a href="https://stderr.cz/feed.atom.xml" target="_blank"><img src="https://stderr.cz/theme/social/rss-32.png" title="Rss" class="si-rss" /></a></li>
                    </ul>
                </div>
            </div>
            <div class="span8">
<h2>MySQL: přidání uživatele a databáze (a pár poznámek)</h2>
<time datetime=2010-12-17T00:00:00+01:00>17. 12. 2010</time><div class="flattr">
    <script id='flattrbtn'>
    (function(i) {
        var f,s=document.getElementById(i);
        f=document.createElement('iframe');
        f.src='//api.flattr.com/button/view/?uid=stderr&button=compact&url='+encodeURIComponent(document.URL)+'&title=MySQL: přidání uživatele a databáze (a pár poznámek)';
        f.title='Flattr';
        f.height=20;
        f.width=110;
        f.style.borderWidth=0;
        s.parentNode.insertBefore(f,s);
        })
    ('flattrbtn');
    </script>
</div>
<div class="article">
<p>Další článek z velmi nepravidelné série "<a href="http://dev.stderr.cz/category/zaklady-administratora/">Základy administrátora</a>" se
zaměřuje na tu úplně nejprvotnější práci s MySQL - vytvoření databáze a
uživatele. Samozřejmě z řádky, pokud máš phpMyAdmin, můžeš si to ručně
naklikat..</p>
<p>Může Ti to připadat jako hloupost, ale věř, že dnes už existuje tolik
služeb, které vyžadují MySQL, že se tyto základní jednoduché příkazy
hodí znát "jako svoje boty". Už jen proto, že naklikání z nějakého
webového/grafického rozhraní jednoduše zdržuje.  </p>
<p>Ve všech případech začneme tím, že se přihlásíme na MySQL server (pod
účtem root):</p>
<div class="highlight"><pre><span class="nv">$ </span>mysql -u root -p -h localhost
Enter password:
mysql&gt;
</pre></div>


<h3>Jak na databázi</h3>
<p>Začněme databází, k jejímu vytvoření použijeme příkaz <code>CREATE DATABASE</code>:</p>
<div class="highlight"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">jmeno_databaze</span><span class="p">;</span>
</pre></div>


<p>Hotovo. Snad ještě zdůrazním, že jméno databáze musí splňovat pár
požadavků:</p>
<ul>
<li>maximální délka je 64 znaků</li>
<li>nesmí obsahovat mezeru</li>
<li>nesmí obsahovat znaky <code>/</code>, <code>\</code>, <code>.</code> a znaky, které nejsou povolené v
    názvech souborů</li>
<li>nejjednodušší je použít anglickou abecedu a znak _ oddělující
    slova</li>
</ul>
<p><strong>Pozor na nastavení kódování.</strong> MySQL server může být nastaven
všelijak - při zakládání databáze se Ti může hodit nastavení možného
kódování pomocí <code>CHARACTER SET</code> třeba na univerzální UTF-8. Stejně tak
porovnávání se nastavuje pomocí <code>COLLATE</code>, v ČR se hodí
<code>utf8_czech_ci</code>. Více info o MySQL a jazycích je na <a href="http://interval.cz/clanky/mysql-cestina-a-slovenstina/">Intervalu</a>.
Celý příkaz by byl pak:</p>
<div class="highlight"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">jmeno_databaze</span> <span class="k">CHARACTER</span> <span class="kt">SET</span> <span class="n">utf8</span> <span class="k">COLLATE</span> <span class="n">utf8_czech_ci</span><span class="p">;</span>
</pre></div>


<h3>Jak na uživatele</h3>
<p>Vytvoření uživatele je tak jednoduché, že na to zase stačí jeden příkaz:</p>
<div class="highlight"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="n">USER</span> <span class="s1">&#39;uzivatel&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">&#39;nejake-heslo&#39;</span><span class="p">;</span>
</pre></div>


<p>V tuto chvíli máte vytvořeného uživatele, který se může z lokálního
stroje(!) přihlásit a...to je skoro vše. Ještě jsme mu nedali práva k
žádné databázi.</p>
<p>Odkud se uživatel přihlašuje nám určuje řetězec za @ - pokud je zde
<code>'localhost'</code> nebo <code>'127.0.0.1'</code> je přihlášení možné jen z lokálního
stroje. Zadat zde můžeme jak <em>jméno počítače</em>, tak <em>IP adresu</em>. Chceš-li
vytvořit uživatele, který se může přihlašovat <em>odkudkoliv</em>, je třeba
příkaz trošku upravit:</p>
<div class="highlight"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="n">USER</span> <span class="s1">&#39;uzivatel&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">&#39;nejake-heslo&#39;</span><span class="p">;</span>
</pre></div>


<p>Právě znak procenta (<code>%</code>) MySQL serveru říká, že tento uživatel se může
přihlásit z jakéhokoliv počítače.</p>
<h3>Jak to dát dohromady</h3>
<p>Už máme databázi i uživatele, takže nám zbývá jen je spojit neboli
přiřadit uživateli <code>uzivatel</code> práva k databázi <code>jmeno_databaze</code>:</p>
<div class="highlight"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">GRANT</span> <span class="k">ALL</span> <span class="n">PRIVILEGES</span> <span class="k">ON</span> <span class="n">jmeno_databaze</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">&#39;uzivatel&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
</pre></div>


<p>Vytvoření uživatele a přiřazení práv můžeme spojit do jednoho příkazu:</p>
<div class="highlight"><pre><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">jmeno_databaze</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="err">‘</span><span class="n">uzivatel</span><span class="err">’</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="err">‘</span><span class="n">nejake</span><span class="o">-</span><span class="n">heslo</span><span class="err">’</span><span class="p">;</span>
</pre></div>


<p>S právy k databázím není žádná sranda a je dobré je přidělovat s
rozumem. Pro bližší nastudování koukněte do <a href="http://dev.mysql.com/doc/refman/5.5/en/grant.html">dokumentace</a>.</p>
<h3>Zdroje</h3>
<p>MySQL Reference Manual: <a href="http://dev.mysql.com/doc/refman/5.1/en/adding-users.html">adding user</a><br />
MySQL Reference Manual: <a href="http://dev.mysql.com/doc/refman/5.0/en/create-database.html">create database</a><br />
Interval.cz: <a href="http://interval.cz/clanky/mysql-cestina-a-slovenstina/">MySQL - čeština a slovenština</a></p>
</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'stderr-cz-blog';
    var disqus_title = 'MySQL: přidání uživatele a databáze (a pár poznámek)';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Komentáře pouze s JavaScriptem.</noscript>
            </div>
        </div>
    </div>

    <div class="footer">
        <p class="text-center" style="color: #666;">2009 ~ 2014</p>
    </div>
    </body>
</html>